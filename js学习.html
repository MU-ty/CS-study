<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jså­¦ä¹ </title>
    <link rel="stylesheet" href="jsstyle.css">
    <script src="https://kit.fontawesome.com/b827179a14.js" crossorigin="anonymous"></script>
    <link rel="icon" href="./js-brands.svg">

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <script src="https://unpkg.com/element-plus"></script>
    <script src="https://unpkg.com/vue-element-plus-x/dist/index.umd.js"></script>
</head>

<body>
    <div id="nav">
        <ul>
          <li data-page="page1" class="daohang">JavaScriptä»‹ç»</li>
          <li data-page="page2">jsçš„å‘å±•å†å²</li>
          <li data-page="page3">jsçš„ç‰¹ç‚¹</li>
          <li data-page="page4">è¯­æ³•ç®€ä»‹</li>
          <li data-page="page5">åˆ†å·</li>
          <li data-page="page6">å€¼</li>
          <li data-page="page7">å˜é‡</li>
          <li data-page="page8">ç±»å‹</li>
          <li data-page="page9">è¡¨è¾¾å¼</li>
          <li data-page="page10">è¿ç®—ç¬¦</li>
          <li data-page="page11">ä¼˜å…ˆé¡ºåºè§„åˆ™</li>
          <li data-page="page12">æ¯”è¾ƒç¬¦</li>
          <li data-page="page13">æ¡ä»¶å¥</li>
          <li data-page="page14">æ•°ç»„</li>
          <li data-page="page15">å­—ç¬¦ä¸²</li>
          <li data-page="page16">å¾ªç¯</li>
          <li data-page="page17">å‡½æ•°</li>
          <li data-page="page18">ç®­å¤´å‡½æ•°</li>
          <li data-page="page19">å¯¹è±¡</li>
          <li data-page="page20">ç±»</li>
          <li data-page="page21">ç»§æ‰¿</li>
          <li data-page="page22">å¼‚æ­¥ç¼–ç¨‹å’Œå›è°ƒå‡½æ•°</li>
          <li data-page="page23">Promise</li>
          <li data-page="page24">å¼‚æ­¥å’Œç­‰å¾…</li>
          <li data-page="page25">å˜é‡èŒƒå›´</li>
          <li data-page="page26">æ€»ç»“</li>
        </ul>
      </div>
      <div id="content">
        <!-- åˆå§‹å†…å®¹ -->
        <div class="page-title">å¼€å¯JavaScriptä¹‹æ—…</div>
        <div class="start page-content">ç‚¹å‡»å·¦ä¾§çš„å¯¼èˆªæ ä»¥æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼Œç‚¹å‡»å³ä¸‹è§’ğŸ’ğŸ»ï¼Œå¥¹æ˜¯ä½ çš„å­¦ä¹ åŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©ä½ å­¦ä¹ </div>
        <div class="tubiao">
            <i class="fa-brands fa-js" style="color: #63E6BE;"></i>
          </div>
          <h2 class="page-title">å­¦ä¹ ç­–ç•¥</h2>
          <div class="start page-content">åˆ©ç”¨20%çš„æ—¶é—´ï¼ŒæŒæ¡80%çš„å†…å®¹</div>
          <div class="start page-content">Use 20% of the time, master 80% of the content</div>
          <h2 class="page-title">ä¸‹é¢æ˜¯JavaScriptçš„æµè¡Œç¨‹åº¦</h2>
          <div id="vstory-container"></div>
          <script src="https://unpkg.com/@visactor/vstory/dist/index.min.js"></script>
          <script>
            const CONTAINER_ID = 'vstory-container';
            VStory.registerAll();
            async function loadDSL() {
            // æ—¶é—´è½´æ•°æ®
            const timelineData = {
                times: [
                { label: ['Fortran', '1957'], desc: '1957' },
                { label: ['COBOL', '1959'], desc: '1959' },
                { label: ['C', '1972'], desc: '1972' },
                { label: ['C++', '1983'], desc: '1983' },
                { label: ['Python', '1991'], desc: '1991' },
                { label: ['Java,Javascript', '1995'], desc: '1995' },
                { label: ['C#', '2000'], desc: '2000' },
                { label: ['Visual Basic NET', '2002'], desc: '2002' },
                { label: ['PHP', '2004'], desc: '2004' },
                { label: ['Swift', '2014'], desc: '2014' },
                ],
                labelStyle: {
                fontSize: 16,
                fontWeight: 'bold'
                },
                activeSymbolStyle: {
                size: 20
                },
                activeLabelStyle: {
                fontSize: 20,
                fontWeight: 'bold'
                }
            };

            // æ’åæ¡å½¢å›¾æ•°æ®
            const dataJson = {
                data: [
                { "Year": 2008, "Language": "Java", "Rank": 1 },
                { "Year": 2008, "Language": "C", "Rank": 4 },
                { "Year": 2008, "Language": "Python", "Rank": 7 },
                { "Year": 2008, "Language": "C++", "Rank": 5 },
                { "Year": 2008, "Language": "C#", "Rank": 6},
                { "Year": 2008, "Language": "Visual Basic NET", "Rank": 8 },
                { "Year": 2008, "Language": "Javascript", "Rank": 2 },
                { "Year": 2008, "Language": "PHP", "Rank": 3 },
                { "Year": 2008, "Language": "Ruby", "Rank": 9 },
                { "Year": 2008, "Language": "Perl", "Rank": 10 },

                { "Year": 2009, "Language": "Java", "Rank": 1 },
                { "Year": 2009, "Language": "C", "Rank": 5 },
                { "Year": 2009, "Language": "Python", "Rank": 6 },
                { "Year": 2009, "Language": "C++", "Rank": 4 },
                { "Year": 2009, "Language": "C#", "Rank":7 },
                { "Year": 2009, "Language": "Visual Basic NET", "Rank": 8 },
                { "Year": 2009, "Language": "Javascript", "Rank": 2 },
                { "Year": 2009, "Language": "PHP", "Rank": 3 },
                { "Year": 2009, "Language": "Ruby", "Rank": 9 },
                { "Year": 2009, "Language": "Matlab", "Rank": 10 },

                { "Year": 2010, "Language": "Java", "Rank": 1 },
                { "Year": 2010, "Language": "C", "Rank": 5 },
                { "Year": 2010, "Language": "Python", "Rank": 6 },
                { "Year": 2010, "Language": "C++", "Rank": 4 },
                { "Year": 2010, "Language": "C#", "Rank": 5 },
                { "Year": 2010, "Language": "Visual Basic NET", "Rank": 9 },
                { "Year": 2010, "Language": "Javascript", "Rank": 2 },
                { "Year": 2010, "Language": "PHP", "Rank": 3 },
                { "Year": 2010, "Language": "Ruby", "Rank": 10 },
                { "Year": 2010, "Language": "Objective-C", "Rank": 8 },

                { "Year": 2011, "Language": "Java", "Rank": 1 },
                { "Year": 2011, "Language": "C", "Rank": 7 },
                { "Year": 2011, "Language": "Python", "Rank": 4 },
                { "Year": 2011, "Language": "C++", "Rank": 6 },
                { "Year": 2011, "Language": "C#", "Rank": 5 },
                { "Year": 2011, "Language": "Matlab", "Rank": 10 },
                { "Year": 2011, "Language": "Javascript", "Rank": 2 },
                { "Year": 2011, "Language": "PHP", "Rank": 3 },
                { "Year": 2011, "Language": "Ruby", "Rank": 9 },
                { "Year": 2011, "Language": "Objective-C", "Rank": 8 },

                { "Year": 2012, "Language": "Java", "Rank": 1 },
                { "Year": 2012, "Language": "C", "Rank": 7 },
                { "Year": 2012, "Language": "Python", "Rank": 5 },
                { "Year": 2012, "Language": "C++", "Rank": 4 },
                { "Year": 2012, "Language": "C#", "Rank": 6 },
                { "Year": 2012, "Language": "Visual Basic NET", "Rank": 10 },
                { "Year": 2012, "Language": "Javascript", "Rank": 2 },
                { "Year": 2012, "Language": "PHP", "Rank": 3 },
                { "Year": 2012, "Language": "Ruby", "Rank": 9 },
                { "Year": 2012, "Language": "Objective-C", "Rank": 8 },

                { "Year": 2013, "Language": "Java", "Rank": 1 },
                { "Year": 2013, "Language": "C", "Rank": 8 },
                { "Year": 2013, "Language": "Python", "Rank": 4 },
                { "Year": 2013, "Language": "C++", "Rank": 6 },
                { "Year": 2013, "Language": "C#", "Rank": 5 },
                { "Year": 2013, "Language": "Matlab", "Rank": 10 },
                { "Year": 2013, "Language": "Javascript", "Rank": 2 },
                { "Year": 2013, "Language": "PHP", "Rank": 3 },
                { "Year": 2013, "Language": "Objective-C", "Rank": 7 },
                { "Year": 2013, "Language": "Ruby", "Rank": 9 },

                { "Year": 2014, "Language": "Java", "Rank": 1 },
                { "Year": 2014, "Language": "C", "Rank": 7 },
                { "Year": 2014, "Language": "Python", "Rank": 3 },
                { "Year": 2014, "Language": "C++", "Rank": 6 },
                { "Year": 2014, "Language": "C#", "Rank": 5 },
                { "Year": 2014, "Language": "R", "Rank": 10 },
                { "Year": 2014, "Language": "Javascript", "Rank": 2 },
                { "Year": 2014, "Language": "PHP", "Rank": 4 },
                { "Year": 2014, "Language": "Objective-C", "Rank": 8 },
                { "Year": 2014, "Language": "Swift", "Rank": 9 },

                { "Year": 2015, "Language": "Java", "Rank": 1 },
                { "Year": 2015, "Language": "C", "Rank": 7 },
                { "Year": 2015, "Language": "Python", "Rank": 3 },
                { "Year": 2015, "Language": "C++", "Rank": 6 },
                { "Year": 2015, "Language": "C#", "Rank": 5 },
                { "Year": 2015, "Language": "R", "Rank": 10 },
                { "Year": 2015, "Language": "Javascript", "Rank": 2 },
                { "Year": 2015, "Language": "PHP", "Rank": 4 },
                { "Year": 2015, "Language": "Swift", "Rank": 9 },
                { "Year": 2015, "Language": "Objective-C", "Rank": 8 },

                { "Year": 2016, "Language": "Java", "Rank": 1 },
                { "Year": 2016, "Language": "C", "Rank": 7 },
                { "Year": 2016, "Language": "Python", "Rank": 3 },
                { "Year": 2016, "Language": "C++", "Rank": 6 },
                { "Year": 2016, "Language": "C#", "Rank": 5 },
                { "Year": 2016, "Language": "R", "Rank": 9 },
                { "Year": 2016, "Language": "Javascript", "Rank": 2 },
                { "Year": 2016, "Language": "PHP", "Rank": 4 },
                { "Year": 2016, "Language": "Swift", "Rank": 10 },
                { "Year": 2016, "Language": "Objective-C", "Rank": 8 },

                { "Year": 2017, "Language": "Java", "Rank": 1 },
                { "Year": 2017, "Language": "C", "Rank": 7 },
                { "Year": 2017, "Language": "Python", "Rank": 3 },
                { "Year": 2017, "Language": "C++", "Rank": 6 },
                { "Year": 2017, "Language": "C#", "Rank": 5 },
                { "Year": 2017, "Language": "R", "Rank": 8 },
                { "Year": 2017, "Language": "Javascript", "Rank": 2 },
                { "Year": 2017, "Language": "PHP", "Rank": 4 },
                { "Year": 2017, "Language": "Swift", "Rank": 10 },
                { "Year": 2017, "Language": " Objective-C", "Rank": 9 },

                { "Year": 2018, "Language": "Java", "Rank": 1 },
                { "Year": 2018, "Language": "C", "Rank": 7 },
                { "Year": 2018, "Language": "Python", "Rank": 3 },
                { "Year": 2018, "Language": "C++", "Rank": 6 },
                { "Year": 2018, "Language": "C#", "Rank": 5 },
                { "Year": 2018, "Language": "R", "Rank": 8 },
                { "Year": 2018, "Language": "Javascript", "Rank": 2 },
                { "Year": 2018, "Language": "PHP", "Rank": 4 },
                { "Year": 2018, "Language": "Swift", "Rank": 10 },
                { "Year": 2018, "Language": " Objective-C", "Rank": 9 },

                { "Year": 2019, "Language": "Java", "Rank": 3 },
                { "Year": 2019, "Language": "C", "Rank": 7 },
                { "Year": 2019, "Language": "Python", "Rank": 1 },
                { "Year": 2019, "Language": "C++", "Rank": 6 },
                { "Year": 2019, "Language": "C#", "Rank": 4 },
                { "Year": 2019, "Language": "Objective-C", "Rank": 10 },
                { "Year": 2019, "Language": "Javascript", "Rank": 2 },
                { "Year": 2019, "Language": "PHP", "Rank": 5 },
                { "Year": 2019, "Language": "Swift", "Rank": 9 },
                { "Year": 2019, "Language": "R", "Rank": 8 },

                { "Year": 2020, "Language": "Java", "Rank": 1 },
                { "Year": 2020, "Language": "C", "Rank": 2 },
                { "Year": 2020, "Language": "Python", "Rank": 3 },
                { "Year": 2020, "Language": "C++", "Rank": 4 },
                { "Year": 2020, "Language": "C#", "Rank": 5 },
                { "Year": 2020, "Language": "Visual Basic NET", "Rank": 6 },
                { "Year": 2020, "Language": "Javascript", "Rank": 7 },
                { "Year": 2020, "Language": "PHP", "Rank": 8 },
                { "Year": 2020, "Language": "Swift", "Rank": 9 },
                { "Year": 2020, "Language": "SQL", "Rank": 10 },

                { "Year": 2021, "Language": "Python", "Rank": 1 },
                { "Year": 2021, "Language": "Java", "Rank": 2 },
                { "Year": 2021, "Language": "C", "Rank": 3 },
                { "Year": 2021, "Language": "C++", "Rank": 4 },
                { "Year": 2021, "Language": "Javascript", "Rank": 5 },
                { "Year": 2021, "Language": "C#", "Rank": 6 },
                { "Year": 2021, "Language": "R", "Rank": 7 },
                { "Year": 2021, "Language": "Go", "Rank": 8 },
                { "Year": 2021, "Language": "HTML", "Rank": 9 },
                { "Year": 2021, "Language": "Swift", "Rank": 10 },

                { "Year": 2022, "Language": "Python", "Rank": 1 },
                { "Year": 2022, "Language": "Java", "Rank": 2 },
                { "Year": 2022, "Language": "JavaScript", "Rank": 3 },
                { "Year": 2022, "Language": "C", "Rank": 4 },
                { "Year": 2022, "Language": "C++", "Rank": 5 },
                { "Year": 2022, "Language": "PHP", "Rank": 6 },
                { "Year": 2022, "Language": "Ruby", "Rank": 7 },
                { "Year": 2022, "Language": "Swift", "Rank": 8 },
                { "Year": 2022, "Language": "Go", "Rank": 9 },
                { "Year": 2022, "Language": "R", "Rank": 10 },

                { "Year": 2023, "Language": "Python", "Rank": 1 },
                { "Year": 2023, "Language": "Java", "Rank": 2 },
                { "Year": 2023, "Language": "JavaScript", "Rank": 3 },
                { "Year": 2023, "Language": "C", "Rank": 4 },
                { "Year": 2023, "Language": "C++", "Rank": 5 },
                { "Year": 2023, "Language": "PHP", "Rank": 6 },
                { "Year": 2023, "Language": "Ruby", "Rank": 7 },
                { "Year": 2023, "Language": "Swift", "Rank": 8 },
                { "Year": 2023, "Language": "Go", "Rank": 9 },
                { "Year": 2023, "Language": "R", "Rank": 10 },

                { "Year": 2024, "Language": "Python", "Rank": 1 },
                { "Year": 2024, "Language": "Java", "Rank": 2 },
                { "Year": 2024, "Language": "JavaScript", "Rank": 3 },
                { "Year": 2024, "Language": "C", "Rank": 4 },
                { "Year": 2024, "Language": "C++", "Rank": 5 },
                { "Year": 2024, "Language": "PHP", "Rank": 6 },
                { "Year": 2024, "Language": "Ruby", "Rank": 7 },
                { "Year": 2024, "Language": "Swift", "Rank": 8 },
                { "Year": 2024, "Language": "Go", "Rank": 9 },
                { "Year": 2024, "Language": "R", "Rank": 10 },

                ]
            };

            const yearsData = new Map();
            const languageImage = new Map();
            const allData = [];

            dataJson.data.forEach((line) => {
                const { Language, Rank, Year } = line;
                const language_year_data = { Year, Language, Rank };
                if (!yearsData.has(Year)) {
                yearsData.set(Year, []);
                }
                yearsData.get(Year).push(language_year_data);
            });

            yearsData.forEach(value => {
                allData.push(...value);
            });

            // æ’åæ¡å½¢å›¾è§„æ ¼
            const rankingBarSpec = {
                type: 'rankingBar',
                data: allData,
                timeField: 'Year',
                xField: 'Rank',
                yField: 'Language',
                yAxis:{
                label:{
                    fill:'black'
                }
                },
                //icon: Object.fromEntries(languageImage),
                interval: 2000,
                color: {
                Python: 'blue',
                Java: '#F8981D',
                JavaScript: '#F0DB4F',
                C: 'red',
                Ruby: '#CC342D',
                PHP: '#4F5B93',
                Swift: '#F05138',
                Go: '#00ADD8',
                },
                timeLabel: {
                visible: true,
                style: {
                    fontSize: 60,
                }
                },
                nameLabel: {
                visible: true,
                position: 'bar-start',
                style: { fill: 'white' },
                formatMethod: (text, datum) => {
                    if (datum.Language === 'C') {
                    return { text: text, style: { fontWeight: 'bold', fill: 'red' } };
                    }
                    return { text: text };
                }
                }
            };

            // é¥¼å›¾é…ç½®
            const chartSpec = {
                type: 'pie',

                data: [
                {
                    values: [
                    { language: 'Js', percentage: 88 },
                    { language: 'Other', percentage: 12 }
                    ]
                }
                ],
                outerRadius: 0.8,
                valueField: 'percentage',
                categoryField: 'language',
                title: {
                visible: true,
                text: 'JavaScriptå æ¯”',

                },
                legends: {
                visible: true,
                orient: 'left'
                },
                label: {
                visible: true,
                formatMethod: (text, datum) => `${datum.percentage}%`, // æ˜¾ç¤ºç™¾åˆ†æ¯”
                style: {
                fill: 'white', 
                fontSize: 14, 
                fontWeight: 'bold' 
                },
                }
            };

            return {
                characters: [

                // æ·»åŠ æ—¶é—´è½´
                {
                    type: 'Timeline',
                    id: 'timeline',
                    zIndex: 1,
                    position: {
                    top: 90,
                    left: 0,
                    width: 1100,
                    height: 100,
                    },
                    options: {
                    graphic: timelineData,
                    }
                },
                // æ·»åŠ æ’åæ¡å½¢å›¾
                {
                    type: 'RankingBar',
                    id: 'bar',
                    zIndex: 10,
                    position: {
                    top: 170,
                    left: 20,
                    width: 600,
                    height: 400
                    },
                    options: {
                    spec: rankingBarSpec,
                    panel: {
                        fill: 'linear-gradient(135deg,rgb(255, 215, 245) 50%,#667eea 0%)',
                        shadowColor: 'rgba(0, 0, 0, 0.05)',
                        shadowBlur: 10,
                        shadowOffsetX: 4,
                        shadowOffsetY: 4,
                        cornerRadius: 8
                    }
                    },
                },
                // æ·»åŠ æ ‡é¢˜
                {
                    type: 'Text',
                    id: 'title',
                    zIndex: 11,
                    position: {
                    top: 20,
                    left: 500,
                    },
                    options: {
                    graphic: {
                        text: 'Programming Language Popularity',
                        fontSize: 24,
                        fontWeight: 'bold',
                        fill: 'white'
                    }
                    }
                },
                //å†…å®¹
                {
                    type: 'Text',
                    id: 'wenben',
                    zIndex: 11,
                    position: {
                    top: 170,
                    left: 850,
                    },
                    options: {
                    graphic: {
                        text: 'JavaScriptç»ä¹…ä¸è¡°',
                        fontSize: 20,
                        fontWeight: 'bold',
                        fill: 'linear-gradient(135deg,rgb(192, 169, 214) 50%,#667eea 0%)'
                    }
                    }
                },

                //å‰¯å†…å®¹
                {
                    type: 'Text',
                    id: 'fuwenben',
                    zIndex: 11,
                    position: {
                    top: 190,
                    left: 850,
                    width:302,
                    height:0,
                    },
                    options: {
                    graphic: {
                        text: 'è‡ª1995å¹´è¯ç”Ÿä»¥æ¥ï¼ŒJavaScriptä¸€ç›´æ˜¯æœ€æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚å®ƒè¢«å¹¿æ³›åº”ç”¨äºWebå¼€å‘ã€ç§»åŠ¨åº”ç”¨å¼€å‘ã€æ¸¸æˆå¼€å‘ç­‰é¢†åŸŸã€‚',
                        fill: 'white'
                    }
                    }
                },
                //å‰¯å‰¯å†…å®¹
                {
                    type: 'Text',
                    id: 'fufwenben',
                    zIndex: 11,
                    startTime:10000,
                    position: {
                    top: 315,
                    left: 850,
                    width:302,
                    height:0,
                    },
                    options: {
                    graphic: {
                        text: '',
                        fontWeight:'bold',
                        fill: '#333'
                    }
                    }
                },
                // æ·»åŠ é¥¼å›¾
                {
                    type: 'VChart',
                    id: 'cPieChart',
                    zIndex: 10,
                    position: {
                    top: 290,
                    left: 700, 
                    width: 300,
                    height: 280
                    },
                    options: {
                    spec: chartSpec,
                    panel: {
                        fill: 'linear-gradient(135deg,rgb(192, 169, 214) 50%,#667eea 0%)',
                        shadowColor: 'rgba(0, 0, 0, 0.05)',
                        shadowBlur: 10,
                        shadowOffsetX: 4,
                        shadowOffsetY: 4,
                        cornerRadius: 8
                    }

                    }
                }

                ],
                acts: [
                {
                    id: 'default-chapter',
                    scenes: [
                    {
                        id: 'scene0',
                        actions: [
                        // æ—¶é—´è½´åŠ¨ä½œ
                        {
                            characterId: 'timeline',
                            characterActions: [
                            {
                                startTime: 1000,
                                action: 'appear',
                                payload: {
                                animation: {
                                    duration: 2000,
                                    effect: 'default'
                                }
                                }
                            },
                            ...(new Array(timelineData.times.length+1).fill(0).map((item, index) => {
                                return {
                                startTime: 3000 + index * 3100,
                                action: 'state',
                                payload: {
                                    animation: {
                                    duration: 3000,
                                    effect: 'forward'
                                    }
                                }
                                };
                            }))
                            ]
                        },

                        // æ’åæ¡å½¢å›¾åŠ¨ç”»
                        {
                            characterId: 'bar',
                            characterActions: [
                            {
                                action: 'appear',
                                payload: { animation: { duration: 1000, effect: 'fade' } }
                            },
                            {
                                action: 'bounce',
                                payload: {
                                customEase: 'M0,0 C0,0 0,0 0.047,0 0.047,0 0.103,1 0.236,1 0.368,1 0.424,0 0.424,0 0.424,0 0.443,0 0.443,0 0.443,0 0.471,0.49 0.553,0.49 0.619,0.49 0.668,0 0.668,0 0.668,0 0.677,0 0.677,0 0.677,0 0.699,0.216 0.743,0.216 0.778,0.216 0.811,0 0.811,0 0.811,0 0.815,0 0.815,0 0.815,0 0.828,0.086 0.854,0.086 0.875,0.086 0.895,0 0.895,0 0.895,0 0.896,0 0.896,0 0.896,0 0.904,0.031 0.92,0.031 0.932,0.031 0.944,0 0.944,0 0.944,0 0.944,0 0.944,0 0.944,0 0.948,0.01 0.958,0.01 0.966,0.01 0.973,0 0.973,0 0.973,0 0.973,0 0.973,0 0.973,0 0.975,0.002 0.981,0.002 0.986,0.002 0.989,0 0.989,0 0.989,0 0.99,0 0.99,0 0.99,0 0.99,0 0.994,0 0.998,0 1,0 1,0',
                                animation: { duration: 2000 }
                                }
                            }
                            ]
                        },
                        // æ ‡é¢˜åŠ¨ç”»
                        {
                            characterId: 'title',
                            characterActions: [
                            {
                                action: 'appear',
                                payload: { animation: { duration: 1000, effect: 'fade' } }
                            }
                            ]
                        },
                        //æ–‡æœ¬åŠ¨ç”»
                        {
                            characterId: 'wenben',
                            characterActions: [
                            {
                                action: 'appear',
                                payload: { animation: { duration: 10000, effect: 'fade' } }
                            }
                            ]
                        },
                        //å‰¯æ–‡æœ¬åŠ¨ç”»
                        {
                            characterId: 'fuwenben',
                            characterActions: [
                            {
                                action: 'appear',
                                payload: { animation: { duration: 20000, effect: 'fade' } }
                            }
                            ]
                        },

                        //å‰¯å‰¯æ–‡æœ¬åŠ¨ç”»
                        {
                            characterId: 'fufwenben',
                            characterActions: [
                            {
                                action: 'appear',
                                payload: { animation: { duration: 1000, effect: 'fade' } }
                            }
                            ]
                        },
                        // é¥¼å›¾åŠ¨ç”»
                        {
                            characterId: 'cPieChart',
                            characterActions: [
                            {
                                startTime:10000,
                                action: 'appear',
                                payload: { animation: { duration: 1000, effect: 'fade' } }
                            }
                            ]
                        },

                        ]
                    },
                    ]
                }
                ]
            };
            }

            document.addEventListener('DOMContentLoaded', async () => {
                try {
                    const dsl = await loadDSL();
                    console.log("DSL loaded:", dsl); // è°ƒè¯•
                    
                    const story = new VStory.Story(dsl, {
                        dom: CONTAINER_ID,
                        width: 1100,
                        height: 600,
                        scaleX: 'auto',
                        scaleY: 'auto',
                        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                    });
                    
                    const player = new VStory.Player(story);
                    story.init(player);
                    player.play(0);
                    
                    window['story'] = story;
                    window['vstory'] = story;
                } catch (error) {
                    console.error("VStoryåˆå§‹åŒ–é”™è¯¯:", error);
                }
            });
          </script>

          <div id="content">ç‰¹åˆ«æ„Ÿè°¢ï¼šå¼—æ‹‰ç»´å¥¥Â·ç§‘ä½©æ–¯ï¼ˆFlavio Copesï¼‰åŠæ‚¨çš„handbookä½œå“</div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
              // æ£€æŸ¥å…¨å±€å˜é‡ï¼Œå¸®åŠ©è°ƒè¯•
              console.log('æ£€æŸ¥å…¨å±€å˜é‡:', Object.keys(window).filter(k => 
                k.includes('Vue') || k.includes('Element')));
              
              const { createApp, ref } = Vue;
              
              const app = createApp({
  setup() {
    const messages = ref([
      { content: 'Hello, JavaScript World!', role: 'user' }
    ]);
    const inputText = ref('');
    const isChatOpen = ref(false);
    
    function toggleChat() {
      isChatOpen.value = !isChatOpen.value;
    }
    
    function handleSend(text) {
      if (text.trim()) {
        const userQuestion = text.trim();
        messages.value.push({ content: userQuestion, role: 'user' });
        
        setTimeout(() => {
          const answer = getAnswer(userQuestion);
          messages.value.push({
            content: answer,
            role: 'assistant'
          });
        }, 500);
        
        inputText.value = '';
      }
    }
    
    function getAnswer(question) {
        const q = question.toLowerCase();
  
        if (q.includes('å˜é‡') || q.includes('var') || q.includes('let') || q.includes('const')) {
            return 'JavaScriptä¸­æœ‰ä¸‰ç§å£°æ˜å˜é‡çš„æ–¹å¼ï¼švarã€letå’Œconstã€‚varæ˜¯æ—§å¼å£°æ˜ï¼Œæœ‰å˜é‡æå‡ï¼›letå…è®¸é‡æ–°èµ‹å€¼ï¼›constå£°æ˜å¸¸é‡ï¼Œä¸å¯é‡æ–°èµ‹å€¼ã€‚';
        }
        
        if (q.includes('å‡½æ•°') || q.includes('function')) {
            return 'å‡½æ•°æ˜¯JavaScriptä¸­çš„åŸºæœ¬æ„å»ºå—ï¼Œä½¿ç”¨functionå…³é”®å­—å®šä¹‰ã€‚ç®­å¤´å‡½æ•°(=>)æ˜¯ES6å¼•å…¥çš„ç®€æ´è¯­æ³•ã€‚';
        }
        
        if (q.includes('å¯¹è±¡') || q.includes('object')) {
            return 'JavaScriptå¯¹è±¡æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œå¯ä»¥ä½¿ç”¨{}å£°æ˜ã€‚ä¾‹å¦‚ï¼šlet person = {name: "John", age: 30};';
        }
        
        if (q.includes('æ•°ç»„') || q.includes('array')) {
            return 'æ•°ç»„æ˜¯JavaScriptä¸­çš„æœ‰åºé›†åˆï¼Œä½¿ç”¨[]å£°æ˜ã€‚ä¾‹å¦‚ï¼šlet fruits = ["è‹¹æœ", "é¦™è•‰", "æ©™å­"];';
        }
        
        if (q.includes('å¾ªç¯') || q.includes('loop') || q.includes('for') || q.includes('while')) {
            return 'JavaScriptä¸­çš„å¾ªç¯æœ‰forå¾ªç¯ã€whileå¾ªç¯ã€do...whileå¾ªç¯å’Œfor...of/for...inå¾ªç¯ç­‰å¤šç§å½¢å¼ï¼Œç”¨äºé‡å¤æ‰§è¡Œä»£ç å—ã€‚';
        }
        
        if (q.includes('æ¡ä»¶') || q.includes('if') || q.includes('else')) {
            return 'JavaScriptä¸­çš„æ¡ä»¶è¯­å¥æœ‰ifã€else ifå’Œelseï¼Œç”¨äºæ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç å—ã€‚';
        }

        if (q.includes('ç¬¬å››ç« ç¬¬ä¸€é¢˜') || q.includes('ç¬¬å››ç« ç¬¬1é¢˜')||q.includes('ç¬¬å››ç« ç¬¬äºŒé¢˜') || q.includes('ç¬¬å››ç« ç¬¬2é¢˜')) {
          return 'JavaScriptæ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œè¿™æ„å‘³ç€å˜é‡åã€å‡½æ•°åå’Œå¯¹è±¡åæ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œæ‰€ä»¥æ˜¯å¯¹çš„ã€‚';
        }


        // é»˜è®¤å›ç­”
        return 'è¿™æ˜¯ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼JavaScriptæ˜¯ä¸€ç§çµæ´»çš„è„šæœ¬è¯­è¨€ï¼Œå¹¿æ³›åº”ç”¨äºWebå¼€å‘ã€‚æ‚¨å¯ä»¥é—®æˆ‘å…³äºå˜é‡ã€å‡½æ•°ã€å¯¹è±¡ã€æ•°ç»„ç­‰æ–¹é¢çš„é—®é¢˜ã€‚';
    }
    
    return { messages, inputText, handleSend, isChatOpen, toggleChat };
                },
                template: `
                    <div>
                    <!-- èŠå¤©çª—å£ -->
                    <div class="chat-window" :style="{ display: isChatOpen ? 'block' : 'none' }">
                        <div class="chat-header">
                            <h3>JavaScripté—®ç­”åŠ©æ‰‹</h3>
                            <div class="header-buttons">
                                <el-button type="text" @click="toggleChat" class="minimize-button" title="æœ€å°åŒ–">
                                <i class="el-icon-minus"></i>
                                </el-button>
                                <el-button type="text" @click="toggleChat" class="close-button" title="å…³é—­">
                                <i class="el-icon-close">âŒ</i>
                                </el-button>
                            </div>
                        </div>
                        <div class="chat-content">
                        <el-scrollbar height="330px" class="chat-container">
                            <div v-for="(msg, index) in messages" :key="index" 
                                :style="{ textAlign: msg.role === 'user' ? 'right' : 'left', margin: '8px 0' }"
                                class="message-wrapper">
                            <el-tag :type="msg.role === 'user' ? 'primary' : 'success'" 
                                    style="padding: 8px 12px; border-radius: 18px; display: inline-block; max-width: 80%; white-space: normal; word-break: break-word;">
                                {{ msg.content }}
                            </el-tag>
                            </div>
                        </el-scrollbar>
                        
                        <div style="padding: 10px 0; position: absolute; bottom: 0; left: 0; right: 0; padding: 10px;">
                            <el-input
                            placeholder="è¾“å…¥é—®é¢˜..."
                            v-model="inputText"
                            @keyup.enter="handleSend(inputText)"
                            >
                            <template #append>
                                <el-button @click="handleSend(inputText)">
                                å‘é€
                                </el-button>
                            </template>
                            </el-input>
                        </div>
                        </div>
                    </div>
                    
                    <!-- èŠå¤©åœ†åœˆæŒ‰é’® -->
                    <div class="chat-circle" @click="toggleChat" v-if="!isChatOpen">
                        <i class="el-icon-chat-dot-round">ğŸ’ğŸ»</i>
                    </div>
                    </div>
                `,
                data() {
                    return {};
                }
                });

                app.use(ElementPlus);
                app.mount('#chat-app');
            });

            // æ·»åŠ åˆ°Vueåº”ç”¨çš„setupå‡½æ•°ä¸­
function saveMessages() {
  localStorage.setItem('js-chat-messages', JSON.stringify(messages.value));
  localStorage.setItem('js-chat-open', JSON.stringify(isChatOpen.value));
}

// åˆå§‹åŒ–æ—¶åŠ è½½ä¿å­˜çš„æ¶ˆæ¯
const savedMessages = localStorage.getItem('js-chat-messages');
const savedOpen = localStorage.getItem('js-chat-open');
const messages = ref(savedMessages ? JSON.parse(savedMessages) : [
  { content: 'Hello, JavaScript World!', role: 'user' }
]);
const isChatOpen = ref(savedOpen ? JSON.parse(savedOpen) : false);

// å½“æ¶ˆæ¯å˜åŒ–æ—¶ä¿å­˜
watch(messages, saveMessages, { deep: true });
watch(isChatOpen, saveMessages);
          </script>

      <script src="script.js"></script>
        <div id="floating-chat-container">
            <div id="chat-app"></div>
        </div>
</body>
</html>